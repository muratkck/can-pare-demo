{"ast":null,"code":"import axios from'axios';import React,{useEffect,useState,useRef}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Header=_ref=>{let{handleSearch}=_ref;const[isLoggedIn,setIsLoggedIn]=useState(false);const[user,setUser]=useState(null);const navigate=useNavigate();const location=useLocation();const[dropdownOpen,setDropdownOpen]=useState(false);const[searchQuery,setSearchQuery]=useState('');const dropdownButtonRef=useRef(null);const handleLogout=()=>{localStorage.removeItem('authToken');localStorage.removeItem('userEmail');setIsLoggedIn(false);navigate('/login');};const toggleDropdown=()=>{setDropdownOpen(!dropdownOpen);};const handleFavorites=()=>{navigate('/favorites');};useEffect(()=>{const token=localStorage.getItem('authToken');if(token){setIsLoggedIn(true);const userEmail=localStorage.getItem('userEmail');axios.get(\"http://localhost:5000/api/users/\".concat(userEmail)).then(response=>setUser(response.data)).catch(err=>console.log(err));}else{setIsLoggedIn(false);}},[]);const handleSearchInputChange=e=>{const query=e.target.value;setSearchQuery(query);};const handleKeyDown=e=>{if(e.key==='Enter'){handleSearch(searchQuery);// Call the handleSearch function passed from HomePage\n}};// Function to trigger search when the search icon is clicked\nconst handleSearchClick=()=>{handleSearch(searchQuery);};return/*#__PURE__*/_jsx(\"nav\",{className:\"bg-white border-gray-200 dark:bg-gray-900 fixed top-0 left-0 w-full z-20 shadow-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-full flex items-center justify-between mx-auto p-4\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/\",className:\"flex items-center space-x-3 rtl:space-x-reverse\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://www.svgrepo.com/show/445600/cash-payment.svg\",className:\"h-8\",alt:\"can-pare Logo\"}),/*#__PURE__*/_jsx(\"span\",{className:\"self-center text-2xl font-semibold whitespace-nowrap dark:text-white\",children:\"can-pare\"})]}),isLoggedIn&&location.pathname!=='/product-page'&&/*#__PURE__*/ // Check if not on ProductPage\n_jsx(\"div\",{className:\"flex items-center w-full justify-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative flex items-center justify-center w-1/3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search products...\",value:searchQuery,onChange:handleSearchInputChange,onKeyDown:handleKeyDown// Add the keydown event listener\n,className:\"w-full p-2 border border-gray-300 rounded-md pl-10\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute inset-y-0 right-0 flex items-center mr-3 cursor-pointer\",onClick:handleSearchClick,children:[\" \",/*#__PURE__*/_jsx(\"img\",{src:\"/search.png\",alt:\"Search\",className:\"w-5 h-5\"})]})]})}),isLoggedIn&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 md:space-x-0 rtl:space-x-reverse relative\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleFavorites,className:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white w-full text-left\",children:/*#__PURE__*/_jsx(\"img\",{className:\"w-8 h-8 rounded-full\",src:\"https://www.svgrepo.com/show/309930/save.svg\",alt:\"user photo\"})}),/*#__PURE__*/_jsxs(\"button\",{ref:dropdownButtonRef,onClick:toggleDropdown,type:\"button\",className:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white w-full text-left\",id:\"user-menu-button\",\"aria-expanded\":dropdownOpen,\"aria-haspopup\":\"true\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"sr-only\",children:\"Open user menu\"}),/*#__PURE__*/_jsx(\"img\",{className:\"w-8 h-8 rounded-full\",src:\"profile-circle-svgrepo-com.svg\",alt:\"user photo\"})]}),dropdownOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 mt-4 w-48 z-50 bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700 dark:divide-gray-600\",id:\"user-dropdown\",style:{top:dropdownButtonRef.current?dropdownButtonRef.current.getBoundingClientRect().bottom:'auto'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-3\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"block text-sm text-gray-900 dark:text-white\",children:[user.name,\" \",user.surname]}),/*#__PURE__*/_jsx(\"span\",{className:\"block text-sm text-gray-500 truncate dark:text-gray-400\",children:user.email})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"py-2\",\"aria-labelledby\":\"user-menu-button\",children:/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white w-full text-left\",children:\"Sign out\"})})})]})]})]})});};export default Header;","map":{"version":3,"names":["axios","React","useEffect","useState","useRef","Link","useNavigate","useLocation","jsx","_jsx","jsxs","_jsxs","Header","_ref","handleSearch","isLoggedIn","setIsLoggedIn","user","setUser","navigate","location","dropdownOpen","setDropdownOpen","searchQuery","setSearchQuery","dropdownButtonRef","handleLogout","localStorage","removeItem","toggleDropdown","handleFavorites","token","getItem","userEmail","get","concat","then","response","data","catch","err","console","log","handleSearchInputChange","e","query","target","value","handleKeyDown","key","handleSearchClick","className","children","to","src","alt","pathname","type","placeholder","onChange","onKeyDown","onClick","ref","id","style","top","current","getBoundingClientRect","bottom","name","surname","email"],"sources":["/home/ardasdas/Desktop/Github/can-pare-demo/frontend/src/components/Header.jsx"],"sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useState, useRef } from 'react';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\n\nconst Header = ({ handleSearch }) => {\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const [user, setUser] = useState(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [dropdownOpen, setDropdownOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState('');\n  const dropdownButtonRef = useRef(null);\n\n  const handleLogout = () => {\n    localStorage.removeItem('authToken');\n    localStorage.removeItem('userEmail');\n    setIsLoggedIn(false);\n    navigate('/login');\n  };\n\n  const toggleDropdown = () => {\n    setDropdownOpen(!dropdownOpen);\n  };\n\n  const handleFavorites = () => {\n    navigate('/favorites');\n  };\n\n  useEffect(() => {\n    const token = localStorage.getItem('authToken');\n    if (token) {\n      setIsLoggedIn(true);\n      const userEmail = localStorage.getItem('userEmail');\n      axios.get(`http://localhost:5000/api/users/${userEmail}`)\n        .then(response => setUser(response.data))\n        .catch(err => console.log(err));\n    } else {\n      setIsLoggedIn(false);\n    }\n  }, []);\n  \n  const handleSearchInputChange = (e) => {\n    const query = e.target.value;\n    setSearchQuery(query);\n  };\n\n  const handleKeyDown = (e) => {\n    if (e.key === 'Enter') {\n      handleSearch(searchQuery);  // Call the handleSearch function passed from HomePage\n    }\n  };\n\n  // Function to trigger search when the search icon is clicked\n  const handleSearchClick = () => {\n    handleSearch(searchQuery);\n  };\n\n  return (\n    <nav className=\"bg-white border-gray-200 dark:bg-gray-900 fixed top-0 left-0 w-full z-20 shadow-lg\">\n      <div className=\"max-w-full flex items-center justify-between mx-auto p-4\">\n        <Link to=\"/\" className=\"flex items-center space-x-3 rtl:space-x-reverse\">\n          <img src=\"https://www.svgrepo.com/show/445600/cash-payment.svg\" className=\"h-8\" alt=\"can-pare Logo\" />\n          <span className=\"self-center text-2xl font-semibold whitespace-nowrap dark:text-white\">can-pare</span>\n        </Link>\n        {isLoggedIn && location.pathname !== '/product-page' && ( // Check if not on ProductPage\n          <div className=\"flex items-center w-full justify-center\">\n            <div className=\"relative flex items-center justify-center w-1/3\">\n              <input\n                type=\"text\"\n                placeholder=\"Search products...\"\n                value={searchQuery}\n                onChange={handleSearchInputChange}\n                onKeyDown={handleKeyDown}  // Add the keydown event listener\n                className=\"w-full p-2 border border-gray-300 rounded-md pl-10\"\n              />\n              <div className=\"absolute inset-y-0 right-0 flex items-center mr-3 cursor-pointer\" onClick={handleSearchClick}> {/* Added onClick event */}\n                <img src='/search.png' alt=\"Search\" className=\"w-5 h-5\" />\n              </div>\n            </div>\n          </div>\n        )}\n\n        {isLoggedIn && (\n          <div className=\"flex items-center space-x-3 md:space-x-0 rtl:space-x-reverse relative\">\n            <button onClick={handleFavorites} className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white w-full text-left\">\n              <img className=\"w-8 h-8 rounded-full\" src=\"https://www.svgrepo.com/show/309930/save.svg\" alt=\"user photo\" />\n            </button>\n            <button\n              ref={dropdownButtonRef}\n              onClick={toggleDropdown}\n              type=\"button\"\n              className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white w-full text-left\"\n              id=\"user-menu-button\"\n              aria-expanded={dropdownOpen}\n              aria-haspopup=\"true\"\n            >\n              <span className=\"sr-only\">Open user menu</span>\n              <img className=\"w-8 h-8 rounded-full\" src=\"profile-circle-svgrepo-com.svg\" alt=\"user photo\" />\n            </button>\n            {dropdownOpen && (\n              <div\n                className=\"absolute right-0 mt-4 w-48 z-50 bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700 dark:divide-gray-600\"\n                id=\"user-dropdown\"\n                style={{\n                  top: dropdownButtonRef.current ? dropdownButtonRef.current.getBoundingClientRect().bottom : 'auto',\n                }}\n              >\n                <div className=\"px-4 py-3\">\n                  <span className=\"block text-sm text-gray-900 dark:text-white\">{user.name } {user.surname}</span>\n                  <span className=\"block text-sm text-gray-500 truncate dark:text-gray-400\">{user.email}</span>\n                </div>\n                <ul className=\"py-2\" aria-labelledby=\"user-menu-button\">\n                  <li>\n                    <button onClick={handleLogout} className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 dark:text-gray-200 dark:hover:text-white w-full text-left\">Sign out</button>\n                  </li>\n                </ul>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </nav>\n  );\n};\n\nexport default Header;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}